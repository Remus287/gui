<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanilla JavaScript Chart</title>
</head>
<body>
    <canvas id="myChart" height = "400" width = "800"></canvas>

    <script>
        const canvas = document.getElementById('myChart');
        const context = canvas.getContext('2d');

        const data = [];
        const labels = [];

        function drawChart() {
            context.clearRect(0, 0, canvas.width, canvas.height);

            context.beginPath();
            context.moveTo(20, canvas.height);
            context.lineTo(20, 0);
            context.stroke();

            const dataPoints = data.map((value, index) => ({
                x: index * (canvas.width / (data.length - 1)),
                y: canvas.height - (value * (canvas.height / Math.max(...data)))
            }));

            context.beginPath();
            context.moveTo(dataPoints[0].x + 20, dataPoints[0].y);

            dataPoints.forEach(point => {
                context.lineTo(point.x + 20, point.y);
            });

            context.lineWidth = 1;
            context.strokeStyle = 'black';
            context.stroke();

            // x-axis labels
            context.fillStyle = 'black';
            dataPoints.forEach((point, index) => {
                context.fillText(labels[index], point.x, canvas.height + 15);
            });

            // Draw y-axis labels
            const maxLabel = Math.ceil(Math.max(...data) * 10) / 10;
            const minLabel = Math.floor(Math.min(...data) * 10) / 10;

            const yStep = (maxLabel - minLabel) / 10;

            context.fillStyle = 'black';
            for (let i = 0; i <= 10; i++) {
                const yLabel = (minLabel + i * yStep).toFixed(1);
                const yPosition = canvas.height - (i * (canvas.height / 10));
                context.fillText(yLabel, 0, yPosition);
            }
        }

        function updateData(newData) {
            data.push(newData);
            labels.push('NewLabel');

            if (data.length > 50) {
                // Discard the oldest data points
                data.shift();
                labels.shift();
            }

            drawChart();
        }

        setInterval(() => {
            const newDataPoint = Math.random();
            updateData(newDataPoint);
        }, 10);
    </script>
</body>
</html>
