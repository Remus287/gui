<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vanilla JavaScript Chart</title>
    <style>
        canvas {
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>
    <canvas id="myChart" width="1500" height="800"></canvas>

    <script>
        const canvas = document.getElementById('myChart');
        const ctx = canvas.getContext('2d');

        const data = [];
        const labels = [];

        function drawChart() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.beginPath();
            ctx.moveTo(40, canvas.height);
            ctx.lineTo(40, 0);
            ctx.stroke();

            const dataPoints = data.map((value, index) => ({
                x: index * (canvas.width / (data.length - 1)),
                y: canvas.height - (value * (canvas.height / Math.max(...data)))
            }));

            ctx.beginPath();
            ctx.moveTo(dataPoints[0].x, dataPoints[0].y);

            dataPoints.forEach(point => {
                ctx.lineTo(point.x, point.y);
            });

            ctx.strokeStyle = 'blue';
            ctx.stroke();

            ctx.fillStyle = 'black';
            dataPoints.forEach((point, index) => {
                ctx.fillText(labels[index], point.x, canvas.height + 15);
            });

            // Draw y-axis labels
            const maxLabel = Math.ceil(Math.max(...data) * 10) / 10;
            const minLabel = Math.floor(Math.min(...data) * 10) / 10;

            const yStep = (maxLabel - minLabel) / 10;

            ctx.fillStyle = 'black';
            for (let i = 0; i <= 10; i++) {
                const yLabel = (minLabel + i * yStep).toFixed(1);
                const yPosition = canvas.height - (i * (canvas.height / 10));
                ctx.fillText(yLabel, 10, yPosition);
            }
        }

        function updateData(newData) {
            data.push(newData);
            labels.push('NewLabel');

            if (data.length > 50) {
                // Discard the oldest data points
                data.shift();
                labels.shift();
            }

            drawChart();
        }

        setInterval(() => {
            const newDataPoint = Math.random();
            updateData(newDataPoint);
        }, 1000);
    </script>
</body>
</html>
